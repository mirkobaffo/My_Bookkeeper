<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="it">
<head>
<!-- Generated by javadoc (11.0.11) on Mon Aug 09 18:34:09 CEST 2021 -->
<title>ReadOnlyLedgerHandle (Apache BookKeeper :: Server 4.14.0-SNAPSHOT API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2021-08-09">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ReadOnlyLedgerHandle (Apache BookKeeper :: Server 4.14.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ReadOnlyLedgerHandle.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.apache.bookkeeper.client</a></div>
<h2 title="Class ReadOnlyLedgerHandle" class="title">Class ReadOnlyLedgerHandle</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="LedgerHandle.html" title="class in org.apache.bookkeeper.client">org.apache.bookkeeper.client.LedgerHandle</a></li>
<li>
<ul class="inheritance">
<li>org.apache.bookkeeper.client.ReadOnlyLedgerHandle</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code>java.lang.AutoCloseable</code>, <code><a href="api/ForceableHandle.html" title="interface in org.apache.bookkeeper.client.api">ForceableHandle</a></code>, <code><a href="api/Handle.html" title="interface in org.apache.bookkeeper.client.api">Handle</a></code>, <code><a href="api/ReadHandle.html" title="interface in org.apache.bookkeeper.client.api">ReadHandle</a></code>, <code><a href="api/WriteHandle.html" title="interface in org.apache.bookkeeper.client.api">WriteHandle</a></code>, <code>org.apache.bookkeeper.proto.BookkeeperInternalCallbacks.LedgerMetadataListener</code></dd>
</dl>
<hr>
<pre>class <span class="typeNameLabel">ReadOnlyLedgerHandle</span>
extends <a href="LedgerHandle.html" title="class in org.apache.bookkeeper.client">LedgerHandle</a>
implements org.apache.bookkeeper.proto.BookkeeperInternalCallbacks.LedgerMetadataListener</pre>
<div class="block">Read only ledger handle. This ledger handle allows you to
 read from a ledger but not to write to it. It overrides all
 the public write operations from LedgerHandle.
 It should be returned for BookKeeper#openLedger operations.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="ReadOnlyLedgerHandle.MetadataUpdater.html" title="class in org.apache.bookkeeper.client">ReadOnlyLedgerHandle.MetadataUpdater</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="nested.classes.inherited.from.class.org.apache.bookkeeper.client.LedgerHandle">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;org.apache.bookkeeper.client.<a href="LedgerHandle.html" title="class in org.apache.bookkeeper.client">LedgerHandle</a></h3>
<code><a href="LedgerHandle.LastConfirmedCtx.html" title="class in org.apache.bookkeeper.client">LedgerHandle.LastConfirmedCtx</a>, <a href="LedgerHandle.NoopCloseCallback.html" title="class in org.apache.bookkeeper.client">LedgerHandle.NoopCloseCallback</a></code></li>
</ul>
</li>
</ul>
</section>
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a id="fields.inherited.from.class.org.apache.bookkeeper.client.LedgerHandle">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.apache.bookkeeper.client.<a href="LedgerHandle.html" title="class in org.apache.bookkeeper.client">LedgerHandle</a></h3>
<code><a href="LedgerHandle.html#bookieFailureHistory">bookieFailureHistory</a>, <a href="LedgerHandle.html#bookiesHealthInfo">bookiesHealthInfo</a>, <a href="LedgerHandle.html#changingEnsemble">changingEnsemble</a>, <a href="LedgerHandle.html#clientCtx">clientCtx</a>, <a href="LedgerHandle.html#delayedWriteFailedBookies">delayedWriteFailedBookies</a>, <a href="LedgerHandle.html#distributionSchedule">distributionSchedule</a>, <a href="LedgerHandle.html#ensembleChangeCounter">ensembleChangeCounter</a>, <a href="LedgerHandle.html#explicitLacFlushPolicy">explicitLacFlushPolicy</a>, <a href="LedgerHandle.html#INVALID_ENTRY_ID">INVALID_ENTRY_ID</a>, <a href="LedgerHandle.html#INVALID_LEDGER_ID">INVALID_LEDGER_ID</a>, <a href="LedgerHandle.html#lacUpdateHitsCounter">lacUpdateHitsCounter</a>, <a href="LedgerHandle.html#lacUpdateMissesCounter">lacUpdateMissesCounter</a>, <a href="LedgerHandle.html#lastAddConfirmed">lastAddConfirmed</a>, <a href="LedgerHandle.html#lastAddPushed">lastAddPushed</a>, <a href="LedgerHandle.html#ledgerId">ledgerId</a>, <a href="LedgerHandle.html#ledgerKey">ledgerKey</a>, <a href="LedgerHandle.html#length">length</a>, <a href="LedgerHandle.html#macManager">macManager</a>, <a href="LedgerHandle.html#numEnsembleChanges">numEnsembleChanges</a>, <a href="LedgerHandle.html#pendingAddOps">pendingAddOps</a>, <a href="LedgerHandle.html#pendingAddsSequenceHead">pendingAddsSequenceHead</a>, <a href="LedgerHandle.html#throttler">throttler</a>, <a href="LedgerHandle.html#timeoutFuture">timeoutFuture</a>, <a href="LedgerHandle.html#writeFlags">writeFlags</a></code></li>
</ul>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.apache.bookkeeper.client.ClientContext,long,org.apache.bookkeeper.versioning.Versioned,org.apache.bookkeeper.client.BookKeeper.DigestType,byte%5B%5D,boolean)">ReadOnlyLedgerHandle</a></span>&#8203;(<a href="ClientContext.html" title="interface in org.apache.bookkeeper.client">ClientContext</a>&nbsp;clientCtx,
                    long&nbsp;ledgerId,
                    org.apache.bookkeeper.versioning.Versioned&lt;<a href="api/LedgerMetadata.html" title="interface in org.apache.bookkeeper.client.api">LedgerMetadata</a>&gt;&nbsp;metadata,
                    <a href="BookKeeper.DigestType.html" title="enum in org.apache.bookkeeper.client">BookKeeper.DigestType</a>&nbsp;digestType,
                    byte[]&nbsp;password,
                    boolean&nbsp;watch)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addEntry(byte%5B%5D)">addEntry</a></span>&#8203;(byte[]&nbsp;data)</code></th>
<td class="colLast">
<div class="block">Add entry synchronously to an open ledger.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addEntry(byte%5B%5D,int,int)">addEntry</a></span>&#8203;(byte[]&nbsp;data,
        int&nbsp;offset,
        int&nbsp;length)</code></th>
<td class="colLast">
<div class="block">Add entry synchronously to an open ledger.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#asyncAddEntry(byte%5B%5D,int,int,org.apache.bookkeeper.client.AsyncCallback.AddCallback,java.lang.Object)">asyncAddEntry</a></span>&#8203;(byte[]&nbsp;data,
             int&nbsp;offset,
             int&nbsp;length,
             <a href="AsyncCallback.AddCallback.html" title="interface in org.apache.bookkeeper.client">AsyncCallback.AddCallback</a>&nbsp;cb,
             java.lang.Object&nbsp;ctx)</code></th>
<td class="colLast">
<div class="block">Add entry asynchronously to an open ledger, using an offset and range.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#asyncAddEntry(byte%5B%5D,org.apache.bookkeeper.client.AsyncCallback.AddCallback,java.lang.Object)">asyncAddEntry</a></span>&#8203;(byte[]&nbsp;data,
             <a href="AsyncCallback.AddCallback.html" title="interface in org.apache.bookkeeper.client">AsyncCallback.AddCallback</a>&nbsp;cb,
             java.lang.Object&nbsp;ctx)</code></th>
<td class="colLast">
<div class="block">Add entry asynchronously to an open ledger.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#asyncClose(org.apache.bookkeeper.client.AsyncCallback.CloseCallback,java.lang.Object)">asyncClose</a></span>&#8203;(<a href="AsyncCallback.CloseCallback.html" title="interface in org.apache.bookkeeper.client">AsyncCallback.CloseCallback</a>&nbsp;cb,
          java.lang.Object&nbsp;ctx)</code></th>
<td class="colLast">
<div class="block">Asynchronous close, any adds in flight will return errors.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#asyncReadLastEntry(org.apache.bookkeeper.client.AsyncCallback.ReadCallback,java.lang.Object)">asyncReadLastEntry</a></span>&#8203;(<a href="AsyncCallback.ReadCallback.html" title="interface in org.apache.bookkeeper.client">AsyncCallback.ReadCallback</a>&nbsp;cb,
                  java.lang.Object&nbsp;ctx)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#close()">close</a></span>()</code></th>
<td class="colLast">
<div class="block">Synchronous close the write handle, any adds in flight will return errors.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>(package private) java.util.concurrent.CompletableFuture&lt;org.apache.bookkeeper.versioning.Versioned&lt;<a href="api/LedgerMetadata.html" title="interface in org.apache.bookkeeper.client.api">LedgerMetadata</a>&gt;&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#closeRecovered()">closeRecovered</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>(package private) java.util.List&lt;org.apache.bookkeeper.net.BookieId&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCurrentEnsemble()">getCurrentEnsemble</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the current ensemble from the ensemble list.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#handleBookieFailure(java.util.Map)">handleBookieFailure</a></span>&#8203;(java.util.Map&lt;java.lang.Integer,&#8203;org.apache.bookkeeper.net.BookieId&gt;&nbsp;failedBookies)</code></th>
<td class="colLast">
<div class="block">For a read only ledger handle, this method will only ever be called during recovery,
 when we are reading forward from LAC and writing back those entries.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#handleUnrecoverableErrorDuringAdd(int)">handleUnrecoverableErrorDuringAdd</a></span>&#8203;(int&nbsp;rc)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#initializeWriteHandleState()">initializeWriteHandleState</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#onChanged(long,org.apache.bookkeeper.versioning.Versioned)">onChanged</a></span>&#8203;(long&nbsp;lid,
         org.apache.bookkeeper.versioning.Versioned&lt;<a href="api/LedgerMetadata.html" title="interface in org.apache.bookkeeper.client.api">LedgerMetadata</a>&gt;&nbsp;newMetadata)</code></th>
<td class="colLast">
<div class="block">Triggered each time ledger metadata changed.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#recover(org.apache.bookkeeper.proto.BookkeeperInternalCallbacks.GenericCallback)">recover</a></span>&#8203;(org.apache.bookkeeper.proto.BookkeeperInternalCallbacks.GenericCallback&lt;java.lang.Void&gt;&nbsp;finalCb)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#recover(org.apache.bookkeeper.proto.BookkeeperInternalCallbacks.GenericCallback,org.apache.bookkeeper.proto.BookkeeperInternalCallbacks.ReadEntryListener,boolean)">recover</a></span>&#8203;(org.apache.bookkeeper.proto.BookkeeperInternalCallbacks.GenericCallback&lt;java.lang.Void&gt;&nbsp;finalCb,
       org.apache.bookkeeper.proto.BookkeeperInternalCallbacks.ReadEntryListener&nbsp;listener,
       boolean&nbsp;forceRecovery)</code></th>
<td class="colLast">
<div class="block">Recover the ledger.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#toString()">toString</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.org.apache.bookkeeper.client.LedgerHandle">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.bookkeeper.client.<a href="LedgerHandle.html" title="class in org.apache.bookkeeper.client">LedgerHandle</a></h3>
<code><a href="LedgerHandle.html#addEntry(long,byte%5B%5D)">addEntry</a>, <a href="LedgerHandle.html#addEntry(long,byte%5B%5D,int,int)">addEntry</a>, <a href="LedgerHandle.html#addToLength(long)">addToLength</a>, <a href="LedgerHandle.html#appendAsync(io.netty.buffer.ByteBuf)">appendAsync</a>, <a href="LedgerHandle.html#asyncAddEntry(long,byte%5B%5D,int,int,org.apache.bookkeeper.client.AsyncCallback.AddCallback,java.lang.Object)">asyncAddEntry</a>, <a href="LedgerHandle.html#asyncAddEntry(long,byte%5B%5D,int,int,org.apache.bookkeeper.client.AsyncCallback.AddCallbackWithLatency,java.lang.Object)">asyncAddEntry</a>, <a href="LedgerHandle.html#asyncAddEntry(long,byte%5B%5D,org.apache.bookkeeper.client.AsyncCallback.AddCallback,java.lang.Object)">asyncAddEntry</a>, <a href="LedgerHandle.html#asyncAddEntry(long,io.netty.buffer.ByteBuf,org.apache.bookkeeper.client.AsyncCallback.AddCallbackWithLatency,java.lang.Object)">asyncAddEntry</a>, <a href="LedgerHandle.html#asyncAddEntry(io.netty.buffer.ByteBuf,org.apache.bookkeeper.client.AsyncCallback.AddCallback,java.lang.Object)">asyncAddEntry</a>, <a href="LedgerHandle.html#asyncCloseInternal(org.apache.bookkeeper.client.AsyncCallback.CloseCallback,java.lang.Object,int)">asyncCloseInternal</a>, <a href="LedgerHandle.html#asyncReadEntries(long,long,org.apache.bookkeeper.client.AsyncCallback.ReadCallback,java.lang.Object)">asyncReadEntries</a>, <a href="LedgerHandle.html#asyncReadEntriesInternal(long,long,org.apache.bookkeeper.client.AsyncCallback.ReadCallback,java.lang.Object,boolean)">asyncReadEntriesInternal</a>, <a href="LedgerHandle.html#asyncReadExplicitLastConfirmed(org.apache.bookkeeper.client.AsyncCallback.ReadLastConfirmedCallback,java.lang.Object)">asyncReadExplicitLastConfirmed</a>, <a href="LedgerHandle.html#asyncReadLastConfirmed(org.apache.bookkeeper.client.AsyncCallback.ReadLastConfirmedCallback,java.lang.Object)">asyncReadLastConfirmed</a>, <a href="LedgerHandle.html#asyncReadLastConfirmedAndEntry(long,long,boolean,org.apache.bookkeeper.client.AsyncCallback.ReadLastConfirmedAndEntryCallback,java.lang.Object)">asyncReadLastConfirmedAndEntry</a>, <a href="LedgerHandle.html#asyncReadUnconfirmedEntries(long,long,org.apache.bookkeeper.client.AsyncCallback.ReadCallback,java.lang.Object)">asyncReadUnconfirmedEntries</a>, <a href="LedgerHandle.html#asyncRecoveryAddEntry(byte%5B%5D,int,int,org.apache.bookkeeper.client.AsyncCallback.AddCallback,java.lang.Object)">asyncRecoveryAddEntry</a>, <a href="LedgerHandle.html#asyncTryReadLastConfirmed(org.apache.bookkeeper.client.AsyncCallback.ReadLastConfirmedCallback,java.lang.Object)">asyncTryReadLastConfirmed</a>, <a href="LedgerHandle.html#closeAsync()">closeAsync</a>, <a href="LedgerHandle.html#doAsyncAddEntry(org.apache.bookkeeper.client.PendingAddOp)">doAsyncAddEntry</a>, <a href="LedgerHandle.html#doAsyncCloseInternal(org.apache.bookkeeper.client.AsyncCallback.CloseCallback,java.lang.Object,int)">doAsyncCloseInternal</a>, <a href="LedgerHandle.html#drainPendingAddsAndAdjustLength()">drainPendingAddsAndAdjustLength</a>, <a href="LedgerHandle.html#ensembleChangeLoop(java.util.List,java.util.Map)">ensembleChangeLoop</a>, <a href="LedgerHandle.html#errorOutPendingAdds(int)">errorOutPendingAdds</a>, <a href="LedgerHandle.html#errorOutPendingAdds(int,java.util.List)">errorOutPendingAdds</a>, <a href="LedgerHandle.html#force()">force</a>, <a href="LedgerHandle.html#getBookiesHealthInfo()">getBookiesHealthInfo</a>, <a href="LedgerHandle.html#getCtime()">getCtime</a>, <a href="LedgerHandle.html#getCustomMetadata()">getCustomMetadata</a>, <a href="LedgerHandle.html#getDigestManager()">getDigestManager</a>, <a href="LedgerHandle.html#getDistributionSchedule()">getDistributionSchedule</a>, <a href="LedgerHandle.html#getId()">getId</a>, <a href="LedgerHandle.html#getLastAddConfirmed()">getLastAddConfirmed</a>, <a href="LedgerHandle.html#getLastAddPushed()">getLastAddPushed</a>, <a href="LedgerHandle.html#getLedgerKey()">getLedgerKey</a>, <a href="LedgerHandle.html#getLedgerMetadata()">getLedgerMetadata</a>, <a href="LedgerHandle.html#getLength()">getLength</a>, <a href="LedgerHandle.html#getNumBookies()">getNumBookies</a>, <a href="LedgerHandle.html#getNumFragments()">getNumFragments</a>, <a href="LedgerHandle.html#getVersionedLedgerMetadata()">getVersionedLedgerMetadata</a>, <a href="LedgerHandle.html#getWriteFlags()">getWriteFlags</a>, <a href="LedgerHandle.html#getWriteSetForReadOperation(long)">getWriteSetForReadOperation</a>, <a href="LedgerHandle.html#hasDelayedWriteFailedBookies()">hasDelayedWriteFailedBookies</a>, <a href="LedgerHandle.html#isClosed()">isClosed</a>, <a href="LedgerHandle.html#isHandleWritable()">isHandleWritable</a>, <a href="LedgerHandle.html#maybeHandleDelayedWriteBookieFailure()">maybeHandleDelayedWriteBookieFailure</a>, <a href="LedgerHandle.html#notifyWriteFailed(int,org.apache.bookkeeper.net.BookieId)">notifyWriteFailed</a>, <a href="LedgerHandle.html#readAsync(long,long)">readAsync</a>, <a href="LedgerHandle.html#readEntries(long,long)">readEntries</a>, <a href="LedgerHandle.html#readEntriesInternalAsync(long,long,boolean)">readEntriesInternalAsync</a>, <a href="LedgerHandle.html#readExplicitLastConfirmed()">readExplicitLastConfirmed</a>, <a href="LedgerHandle.html#readLastAddConfirmedAndEntryAsync(long,long,boolean)">readLastAddConfirmedAndEntryAsync</a>, <a href="LedgerHandle.html#readLastAddConfirmedAsync()">readLastAddConfirmedAsync</a>, <a href="LedgerHandle.html#readLastConfirmed()">readLastConfirmed</a>, <a href="LedgerHandle.html#readLastEntry()">readLastEntry</a>, <a href="LedgerHandle.html#readUnconfirmedAsync(long,long)">readUnconfirmedAsync</a>, <a href="LedgerHandle.html#readUnconfirmedEntries(long,long)">readUnconfirmedEntries</a>, <a href="LedgerHandle.html#recordReadErrorOnBookie(int)">recordReadErrorOnBookie</a>, <a href="LedgerHandle.html#registerOperationFailureOnBookie(org.apache.bookkeeper.net.BookieId,long)">registerOperationFailureOnBookie</a>, <a href="LedgerHandle.html#sendAddSuccessCallbacks()">sendAddSuccessCallbacks</a>, <a href="LedgerHandle.html#setLastAddConfirmed(long)">setLastAddConfirmed</a>, <a href="LedgerHandle.html#setLedgerMetadata(org.apache.bookkeeper.versioning.Versioned,org.apache.bookkeeper.versioning.Versioned)">setLedgerMetadata</a>, <a href="LedgerHandle.html#tryReadLastAddConfirmedAsync()">tryReadLastAddConfirmedAsync</a>, <a href="LedgerHandle.html#tryReadLastConfirmed()">tryReadLastConfirmed</a>, <a href="LedgerHandle.html#unsetSuccessAndSendWriteRequest(java.util.List,java.util.Set)">unsetSuccessAndSendWriteRequest</a>, <a href="LedgerHandle.html#updateLastConfirmed(long,long)">updateLastConfirmed</a>, <a href="LedgerHandle.html#waitForWritable(org.apache.bookkeeper.client.DistributionSchedule.WriteSet,int,long)">waitForWritable</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.org.apache.bookkeeper.client.api.ReadHandle">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.apache.bookkeeper.client.api.<a href="api/ReadHandle.html" title="interface in org.apache.bookkeeper.client.api">ReadHandle</a></h3>
<code><a href="api/ReadHandle.html#read(long,long)">read</a>, <a href="api/ReadHandle.html#readLastAddConfirmed()">readLastAddConfirmed</a>, <a href="api/ReadHandle.html#readLastAddConfirmedAndEntry(long,long,boolean)">readLastAddConfirmedAndEntry</a>, <a href="api/ReadHandle.html#readUnconfirmed(long,long)">readUnconfirmed</a>, <a href="api/ReadHandle.html#tryReadLastAddConfirmed()">tryReadLastAddConfirmed</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.org.apache.bookkeeper.client.api.WriteHandle">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.apache.bookkeeper.client.api.<a href="api/WriteHandle.html" title="interface in org.apache.bookkeeper.client.api">WriteHandle</a></h3>
<code><a href="api/WriteHandle.html#append(byte%5B%5D)">append</a>, <a href="api/WriteHandle.html#append(byte%5B%5D,int,int)">append</a>, <a href="api/WriteHandle.html#append(io.netty.buffer.ByteBuf)">append</a>, <a href="api/WriteHandle.html#append(java.nio.ByteBuffer)">append</a>, <a href="api/WriteHandle.html#appendAsync(byte%5B%5D)">appendAsync</a>, <a href="api/WriteHandle.html#appendAsync(byte%5B%5D,int,int)">appendAsync</a>, <a href="api/WriteHandle.html#appendAsync(java.nio.ByteBuffer)">appendAsync</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(org.apache.bookkeeper.client.ClientContext,long,org.apache.bookkeeper.versioning.Versioned,org.apache.bookkeeper.client.BookKeeper.DigestType,byte[],boolean)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ReadOnlyLedgerHandle</h4>
<pre>ReadOnlyLedgerHandle&#8203;(<a href="ClientContext.html" title="interface in org.apache.bookkeeper.client">ClientContext</a>&nbsp;clientCtx,
                     long&nbsp;ledgerId,
                     org.apache.bookkeeper.versioning.Versioned&lt;<a href="api/LedgerMetadata.html" title="interface in org.apache.bookkeeper.client.api">LedgerMetadata</a>&gt;&nbsp;metadata,
                     <a href="BookKeeper.DigestType.html" title="enum in org.apache.bookkeeper.client">BookKeeper.DigestType</a>&nbsp;digestType,
                     byte[]&nbsp;password,
                     boolean&nbsp;watch)
              throws java.security.GeneralSecurityException,
                     java.lang.NumberFormatException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.security.GeneralSecurityException</code></dd>
<dd><code>java.lang.NumberFormatException</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;close()
           throws java.lang.InterruptedException,
                  <a href="BKException.html" title="class in org.apache.bookkeeper.client">BKException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="LedgerHandle.html#close()">LedgerHandle</a></code></span></div>
<div class="block">Synchronous close the write handle, any adds in flight will return errors.

 <p>Closing a ledger will ensure that all clients agree on what the last
 entry of the ledger is. Once the ledger has been closed, all reads from the
 ledger will return the same set of entries.

 <p>The close operation can error if it finds conflicting metadata when it
 tries to write to the metadata store. On close, the metadata state is set to
 closed and lastEntry and length of the ledger are fixed in the metadata. A
 conflict occurs if the metadata in the metadata store has a different value for
 the lastEntry or length. If another process has updated the metadata, setting it
 to closed, but have fixed the lastEntry and length to the same values as this
 process is trying to write, the operation completes successfully.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>close</code>&nbsp;in interface&nbsp;<code>java.lang.AutoCloseable</code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="api/Handle.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="api/Handle.html" title="interface in org.apache.bookkeeper.client.api">Handle</a></code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="api/WriteHandle.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="api/WriteHandle.html" title="interface in org.apache.bookkeeper.client.api">WriteHandle</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="LedgerHandle.html#close()">close</a></code>&nbsp;in class&nbsp;<code><a href="LedgerHandle.html" title="class in org.apache.bookkeeper.client">LedgerHandle</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.InterruptedException</code></dd>
<dd><code><a href="BKException.html" title="class in org.apache.bookkeeper.client">BKException</a></code></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="api/Handle.html#closeAsync()"><code>Handle.closeAsync()</code></a></dd>
</dl>
</li>
</ul>
<a id="asyncClose(org.apache.bookkeeper.client.AsyncCallback.CloseCallback,java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>asyncClose</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;asyncClose&#8203;(<a href="AsyncCallback.CloseCallback.html" title="interface in org.apache.bookkeeper.client">AsyncCallback.CloseCallback</a>&nbsp;cb,
                       java.lang.Object&nbsp;ctx)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="LedgerHandle.html#asyncClose(org.apache.bookkeeper.client.AsyncCallback.CloseCallback,java.lang.Object)">LedgerHandle</a></code></span></div>
<div class="block">Asynchronous close, any adds in flight will return errors.

 <p>Closing a ledger will ensure that all clients agree on what the last entry
 of the ledger is. This ensures that, once the ledger has been closed, all
 reads from the ledger will return the same set of entries.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="LedgerHandle.html#asyncClose(org.apache.bookkeeper.client.AsyncCallback.CloseCallback,java.lang.Object)">asyncClose</a></code>&nbsp;in class&nbsp;<code><a href="LedgerHandle.html" title="class in org.apache.bookkeeper.client">LedgerHandle</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>cb</code> - callback implementation</dd>
<dd><code>ctx</code> - control object</dd>
</dl>
</li>
</ul>
<a id="addEntry(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addEntry</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;addEntry&#8203;(byte[]&nbsp;data)
              throws java.lang.InterruptedException,
                     <a href="BKException.html" title="class in org.apache.bookkeeper.client">BKException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="LedgerHandle.html#addEntry(byte%5B%5D)">LedgerHandle</a></code></span></div>
<div class="block">Add entry synchronously to an open ledger.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="LedgerHandle.html#addEntry(byte%5B%5D)">addEntry</a></code>&nbsp;in class&nbsp;<code><a href="LedgerHandle.html" title="class in org.apache.bookkeeper.client">LedgerHandle</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>data</code> - array of bytes to be written to the ledger
         do not reuse the buffer, bk-client will release it appropriately</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the entryId of the new inserted entry</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.InterruptedException</code></dd>
<dd><code><a href="BKException.html" title="class in org.apache.bookkeeper.client">BKException</a></code></dd>
</dl>
</li>
</ul>
<a id="addEntry(byte[],int,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addEntry</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;addEntry&#8203;(byte[]&nbsp;data,
                     int&nbsp;offset,
                     int&nbsp;length)
              throws java.lang.InterruptedException,
                     <a href="BKException.html" title="class in org.apache.bookkeeper.client">BKException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="LedgerHandle.html#addEntry(byte%5B%5D,int,int)">LedgerHandle</a></code></span></div>
<div class="block">Add entry synchronously to an open ledger.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="LedgerHandle.html#addEntry(byte%5B%5D,int,int)">addEntry</a></code>&nbsp;in class&nbsp;<code><a href="LedgerHandle.html" title="class in org.apache.bookkeeper.client">LedgerHandle</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>data</code> - array of bytes to be written to the ledger
         do not reuse the buffer, bk-client will release it appropriately</dd>
<dd><code>offset</code> - offset from which to take bytes from data</dd>
<dd><code>length</code> - number of bytes to take from data</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the entryId of the new inserted entry</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.InterruptedException</code></dd>
<dd><code><a href="BKException.html" title="class in org.apache.bookkeeper.client">BKException</a></code></dd>
</dl>
</li>
</ul>
<a id="asyncAddEntry(byte[],org.apache.bookkeeper.client.AsyncCallback.AddCallback,java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>asyncAddEntry</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;asyncAddEntry&#8203;(byte[]&nbsp;data,
                          <a href="AsyncCallback.AddCallback.html" title="interface in org.apache.bookkeeper.client">AsyncCallback.AddCallback</a>&nbsp;cb,
                          java.lang.Object&nbsp;ctx)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="LedgerHandle.html#asyncAddEntry(byte%5B%5D,org.apache.bookkeeper.client.AsyncCallback.AddCallback,java.lang.Object)">LedgerHandle</a></code></span></div>
<div class="block">Add entry asynchronously to an open ledger.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="LedgerHandle.html#asyncAddEntry(byte%5B%5D,org.apache.bookkeeper.client.AsyncCallback.AddCallback,java.lang.Object)">asyncAddEntry</a></code>&nbsp;in class&nbsp;<code><a href="LedgerHandle.html" title="class in org.apache.bookkeeper.client">LedgerHandle</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>data</code> - array of bytes to be written
          do not reuse the buffer, bk-client will release it appropriately</dd>
<dd><code>cb</code> - object implementing callbackinterface</dd>
<dd><code>ctx</code> - some control object</dd>
</dl>
</li>
</ul>
<a id="asyncAddEntry(byte[],int,int,org.apache.bookkeeper.client.AsyncCallback.AddCallback,java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>asyncAddEntry</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;asyncAddEntry&#8203;(byte[]&nbsp;data,
                          int&nbsp;offset,
                          int&nbsp;length,
                          <a href="AsyncCallback.AddCallback.html" title="interface in org.apache.bookkeeper.client">AsyncCallback.AddCallback</a>&nbsp;cb,
                          java.lang.Object&nbsp;ctx)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="LedgerHandle.html#asyncAddEntry(byte%5B%5D,int,int,org.apache.bookkeeper.client.AsyncCallback.AddCallback,java.lang.Object)">LedgerHandle</a></code></span></div>
<div class="block">Add entry asynchronously to an open ledger, using an offset and range.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="LedgerHandle.html#asyncAddEntry(byte%5B%5D,int,int,org.apache.bookkeeper.client.AsyncCallback.AddCallback,java.lang.Object)">asyncAddEntry</a></code>&nbsp;in class&nbsp;<code><a href="LedgerHandle.html" title="class in org.apache.bookkeeper.client">LedgerHandle</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>data</code> - array of bytes to be written
          do not reuse the buffer, bk-client will release it appropriately</dd>
<dd><code>offset</code> - offset from which to take bytes from data</dd>
<dd><code>length</code> - number of bytes to take from data</dd>
<dd><code>cb</code> - object implementing callbackinterface</dd>
<dd><code>ctx</code> - some control object</dd>
</dl>
</li>
</ul>
<a id="onChanged(long,org.apache.bookkeeper.versioning.Versioned)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onChanged</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;onChanged&#8203;(long&nbsp;lid,
                      org.apache.bookkeeper.versioning.Versioned&lt;<a href="api/LedgerMetadata.html" title="interface in org.apache.bookkeeper.client.api">LedgerMetadata</a>&gt;&nbsp;newMetadata)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code>org.apache.bookkeeper.proto.BookkeeperInternalCallbacks.LedgerMetadataListener</code></span></div>
<div class="block">Triggered each time ledger metadata changed.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>onChanged</code>&nbsp;in interface&nbsp;<code>org.apache.bookkeeper.proto.BookkeeperInternalCallbacks.LedgerMetadataListener</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>lid</code> - ledger id.</dd>
<dd><code>newMetadata</code> - new ledger metadata.</dd>
</dl>
</li>
</ul>
<a id="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre class="methodSignature">public&nbsp;java.lang.String&nbsp;toString()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
</dl>
</li>
</ul>
<a id="initializeWriteHandleState()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initializeWriteHandleState</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;initializeWriteHandleState()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="LedgerHandle.html#initializeWriteHandleState()">initializeWriteHandleState</a></code>&nbsp;in class&nbsp;<code><a href="LedgerHandle.html" title="class in org.apache.bookkeeper.client">LedgerHandle</a></code></dd>
</dl>
</li>
</ul>
<a id="asyncReadLastEntry(org.apache.bookkeeper.client.AsyncCallback.ReadCallback,java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>asyncReadLastEntry</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;asyncReadLastEntry&#8203;(<a href="AsyncCallback.ReadCallback.html" title="interface in org.apache.bookkeeper.client">AsyncCallback.ReadCallback</a>&nbsp;cb,
                               java.lang.Object&nbsp;ctx)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="LedgerHandle.html#asyncReadLastEntry(org.apache.bookkeeper.client.AsyncCallback.ReadCallback,java.lang.Object)">asyncReadLastEntry</a></code>&nbsp;in class&nbsp;<code><a href="LedgerHandle.html" title="class in org.apache.bookkeeper.client">LedgerHandle</a></code></dd>
</dl>
</li>
</ul>
<a id="handleBookieFailure(java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>handleBookieFailure</h4>
<pre class="methodSignature">void&nbsp;handleBookieFailure&#8203;(java.util.Map&lt;java.lang.Integer,&#8203;org.apache.bookkeeper.net.BookieId&gt;&nbsp;failedBookies)</pre>
<div class="block">For a read only ledger handle, this method will only ever be called during recovery,
 when we are reading forward from LAC and writing back those entries. As such,
 unlike with LedgerHandle, we do not want to persist changes to the metadata as they occur,
 but rather, we want to defer the persistence until recovery has completed, and do it all
 on the close.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="LedgerHandle.html#handleBookieFailure(java.util.Map)">handleBookieFailure</a></code>&nbsp;in class&nbsp;<code><a href="LedgerHandle.html" title="class in org.apache.bookkeeper.client">LedgerHandle</a></code></dd>
</dl>
</li>
</ul>
<a id="handleUnrecoverableErrorDuringAdd(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>handleUnrecoverableErrorDuringAdd</h4>
<pre class="methodSignature">void&nbsp;handleUnrecoverableErrorDuringAdd&#8203;(int&nbsp;rc)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="LedgerHandle.html#handleUnrecoverableErrorDuringAdd(int)">handleUnrecoverableErrorDuringAdd</a></code>&nbsp;in class&nbsp;<code><a href="LedgerHandle.html" title="class in org.apache.bookkeeper.client">LedgerHandle</a></code></dd>
</dl>
</li>
</ul>
<a id="recover(org.apache.bookkeeper.proto.BookkeeperInternalCallbacks.GenericCallback)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recover</h4>
<pre class="methodSignature">void&nbsp;recover&#8203;(org.apache.bookkeeper.proto.BookkeeperInternalCallbacks.GenericCallback&lt;java.lang.Void&gt;&nbsp;finalCb)</pre>
</li>
</ul>
<a id="recover(org.apache.bookkeeper.proto.BookkeeperInternalCallbacks.GenericCallback,org.apache.bookkeeper.proto.BookkeeperInternalCallbacks.ReadEntryListener,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recover</h4>
<pre class="methodSignature">void&nbsp;recover&#8203;(org.apache.bookkeeper.proto.BookkeeperInternalCallbacks.GenericCallback&lt;java.lang.Void&gt;&nbsp;finalCb,
             org.apache.bookkeeper.proto.BookkeeperInternalCallbacks.ReadEntryListener&nbsp;listener,
             boolean&nbsp;forceRecovery)</pre>
<div class="block">Recover the ledger.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>finalCb</code> - callback after recovery is done.</dd>
<dd><code>listener</code> - read entry listener on recovery reads.</dd>
<dd><code>forceRecovery</code> - force the recovery procedure even the ledger metadata shows the ledger is closed.</dd>
</dl>
</li>
</ul>
<a id="closeRecovered()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>closeRecovered</h4>
<pre class="methodSignature">java.util.concurrent.CompletableFuture&lt;org.apache.bookkeeper.versioning.Versioned&lt;<a href="api/LedgerMetadata.html" title="interface in org.apache.bookkeeper.client.api">LedgerMetadata</a>&gt;&gt;&nbsp;closeRecovered()</pre>
</li>
</ul>
<a id="getCurrentEnsemble()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getCurrentEnsemble</h4>
<pre class="methodSignature">java.util.List&lt;org.apache.bookkeeper.net.BookieId&gt;&nbsp;getCurrentEnsemble()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="LedgerHandle.html#getCurrentEnsemble()">LedgerHandle</a></code></span></div>
<div class="block">Get the current ensemble from the ensemble list. The current ensemble
 is the last ensemble in the list. The ledger handle uses this ensemble when
 triggering operations which work on the end of the ledger, such as adding new
 entries or reading the last add confirmed.

 <p>This method is also used by ReadOnlyLedgerHandle during recovery, and when
 tailing a ledger.

 <p>Generally, this method should only be called by LedgerHandle and not by the
 operations themselves, to avoid adding more dependencies between the classes.
 There are too many already.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="LedgerHandle.html#getCurrentEnsemble()">getCurrentEnsemble</a></code>&nbsp;in class&nbsp;<code><a href="LedgerHandle.html" title="class in org.apache.bookkeeper.client">LedgerHandle</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ReadOnlyLedgerHandle.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2011&#x2013;2021 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</body>
</html>
